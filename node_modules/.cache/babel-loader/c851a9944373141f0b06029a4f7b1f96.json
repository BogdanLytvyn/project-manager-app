{"ast":null,"code":"import _objectSpread from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{refreshTemplate}from'../projects/projects-operations';import{addSprintRequest,addSprintSucces,addSprintError,deleteSprintRequest,deleteSprintSucces,deleteSprintError,fetchSprintsRequest,fetchSprintsSucces,fetchSprintsError,changeTitleRequest,changeTitleSuccess,changeTitleError}from'./sprints-actions';axios.defaults.baseURL='https://sbc-backend.goit.global';var fetchSprints=function fetchSprints(projectId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(fetchSprintsRequest());_context.prev=1;_context.next=4;return axios.get(\"/sprint/\".concat(projectId));case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch(fetchSprintsSucces(data.sprints?data.sprints:[]));_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);dispatch(fetchSprintsError(_context.t0===null||_context.t0===void 0?void 0:_context.t0.message));refreshTemplate(function(){return fetchSprints(projectId);},_context.t0,dispatch);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};var addSprint=function addSprint(sprint,projectId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(addSprintRequest());_context2.prev=1;_context2.next=4;return axios.post(\"/sprint/\".concat(projectId),sprint);case 4:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;dispatch(addSprintSucces(_objectSpread(_objectSpread({},data),{},{_id:data.id})));_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);dispatch(addSprintError(_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.message));refreshTemplate(function(){return addSprint(sprint,projectId);},_context2.t0,dispatch);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};var deleteSprint=function deleteSprint(sprintId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(deleteSprintRequest());try{axios.delete(\"/sprint/\".concat(sprintId));dispatch(deleteSprintSucces(sprintId));}catch(error){dispatch(deleteSprintError(error===null||error===void 0?void 0:error.message));refreshTemplate(function(){return deleteSprint(sprintId);},error,dispatch);}case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};var editTitle=function editTitle(sprintId,title){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(changeTitleRequest());_context4.prev=1;_context4.next=4;return axios.patch(\"/sprint/title/\".concat(sprintId),{title:title});case 4:dispatch(changeTitleSuccess({sprintId:sprintId,title:title}));_context4.next=11;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](1);dispatch(changeTitleError(_context4.t0===null||_context4.t0===void 0?void 0:_context4.t0.message));refreshTemplate(function(){return editTitle(sprintId,title);},_context4.t0,dispatch);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[1,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export{addSprint,deleteSprint,fetchSprints,editTitle};","map":{"version":3,"sources":["/home/bogdan/project-manager-app/src/redux/sprints/sprints-operations.js"],"names":["axios","refreshTemplate","addSprintRequest","addSprintSucces","addSprintError","deleteSprintRequest","deleteSprintSucces","deleteSprintError","fetchSprintsRequest","fetchSprintsSucces","fetchSprintsError","changeTitleRequest","changeTitleSuccess","changeTitleError","defaults","baseURL","fetchSprints","projectId","dispatch","get","data","sprints","message","addSprint","sprint","post","_id","id","deleteSprint","sprintId","delete","error","editTitle","title","patch"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { refreshTemplate } from '../projects/projects-operations';\r\nimport {\r\n  addSprintRequest,\r\n  addSprintSucces,\r\n  addSprintError,\r\n  deleteSprintRequest,\r\n  deleteSprintSucces,\r\n  deleteSprintError,\r\n  fetchSprintsRequest,\r\n  fetchSprintsSucces,\r\n  fetchSprintsError,\r\n  changeTitleRequest,\r\n  changeTitleSuccess,\r\n  changeTitleError,\r\n} from './sprints-actions';\r\n\r\naxios.defaults.baseURL = 'https://sbc-backend.goit.global';\r\n\r\nconst fetchSprints = projectId => async dispatch => {\r\n  dispatch(fetchSprintsRequest());\r\n\r\n  try {\r\n    const { data } = await axios.get(`/sprint/${projectId}`);\r\n    dispatch(fetchSprintsSucces(data.sprints ? data.sprints : []));\r\n  } catch (error) {\r\n    dispatch(fetchSprintsError(error?.message));\r\n    refreshTemplate(() => fetchSprints(projectId), error, dispatch);\r\n  }\r\n};\r\n\r\nconst addSprint = (sprint, projectId) => async dispatch => {\r\n  dispatch(addSprintRequest());\r\n  try {\r\n    const { data } = await axios.post(`/sprint/${projectId}`, sprint);\r\n    dispatch(addSprintSucces({ ...data, _id: data.id }));\r\n  } catch (error) {\r\n    dispatch(addSprintError(error?.message));\r\n    refreshTemplate(() => addSprint(sprint, projectId), error, dispatch);\r\n  }\r\n};\r\n\r\nconst deleteSprint = sprintId => async dispatch => {\r\n  dispatch(deleteSprintRequest());\r\n\r\n  try {\r\n    axios.delete(`/sprint/${sprintId}`);\r\n\r\n    dispatch(deleteSprintSucces(sprintId));\r\n  } catch (error) {\r\n    dispatch(deleteSprintError(error?.message));\r\n    refreshTemplate(() => deleteSprint(sprintId), error, dispatch);\r\n  }\r\n};\r\n\r\nconst editTitle = (sprintId, title) => async dispatch => {\r\n  dispatch(changeTitleRequest());\r\n\r\n  try {\r\n    await axios.patch(`/sprint/title/${sprintId}`, { title });\r\n    dispatch(changeTitleSuccess({ sprintId, title }));\r\n  } catch (error) {\r\n    dispatch(changeTitleError(error?.message));\r\n    refreshTemplate(() => editTitle(sprintId, title), error, dispatch);\r\n  }\r\n};\r\n\r\nexport { addSprint, deleteSprint, fetchSprints, editTitle };\r\n"]},"metadata":{},"sourceType":"module"}