{"ast":null,"code":"import _defineProperty from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch}from'react-redux';import{register}from'../../redux/auth/auth-operations.js';import styles from'./RegistrationForm.module.css';import Background from'../background/Background.jsx';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={email:'',password:'',confirm_password:''};export default function RegistrationForm(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];var dispatch=useDispatch();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubmitting=_useState6[0],setIsSubmitting=_useState6[1];var handleChange=function handleChange(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;setUser(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};var handleSubmit=function handleSubmit(event){event.preventDefault();setFormErrors(validate(user));setIsSubmitting(true);};var validate=function validate(user){var errors={};var regex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;if(!user.email){errors.email=/*#__PURE__*/_jsx(\"span\",{className:styles.warning,children:\" Email is a required field\"});}else if(!regex.test(user.email)){errors.email=/*#__PURE__*/_jsx(\"span\",{className:styles.warning,children:\"Invalid email format\"});}if(!user.password){errors.password=/*#__PURE__*/_jsx(\"span\",{className:styles.warning,children:\" Password is a required field\"});}else if(user.password.length<6){errors.password=/*#__PURE__*/_jsx(\"span\",{className:styles.warning,children:\"Password must be more than 6 characters\"});}else if(user.password!==user.confirm_password){errors.confirm_password=/*#__PURE__*/_jsx(\"span\",{className:styles.warning,children:\"Passwords don't match\"});}return errors;};useEffect(function(){if(Object.keys(formErrors).length===0&&isSubmitting){var submitForm=function submitForm(){dispatch(register({email:user.email,password:user.password}));};submitForm();}},[formErrors,isSubmitting,user.email,user.password,dispatch]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.wrapper,children:[/*#__PURE__*/_jsx(Background,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.form,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:\"Sign up\"}),/*#__PURE__*/_jsx(\"label\",{className:styles.label,children:/*#__PURE__*/_jsx(\"input\",{style:{color:formErrors.email?'rgba(204, 32, 41, 0.6)':'rgba(24, 28, 39, 0.6)',borderBottom:formErrors.email?'1px solid rgba(204, 32, 41, 0.6)':'1px solid rgba(24, 28, 39, 0.2)'},type:\"email\",name:\"email\",value:user.email,onChange:handleChange,className:styles.input,placeholder:\"E-mail\"})}),formErrors.email,/*#__PURE__*/_jsx(\"label\",{className:styles.label,children:/*#__PURE__*/_jsx(\"input\",{style:{color:formErrors.password?'rgba(204, 32, 41, 0.6)':'rgba(24, 28, 39, 0.6)',borderBottom:formErrors.password?'1px solid rgba(204, 32, 41, 0.6)':'1px solid rgba(24, 28, 39, 0.2)'},type:\"password\",name:\"password\",value:user.password,onChange:handleChange,className:styles.input,placeholder:\"Password\"})}),formErrors.password,/*#__PURE__*/_jsx(\"label\",{className:styles.label,children:/*#__PURE__*/_jsx(\"input\",{style:{color:formErrors.confirm_password?'rgba(204, 32, 41, 0.6)':'rgba(24, 28, 39, 0.6)',borderBottom:formErrors.confirm_password?'1px solid rgba(204, 32, 41, 0.6)':'1px solid rgba(24, 28, 39, 0.2)'},type:\"password\",name:\"confirm_password\",value:user.confirm_password,onChange:handleChange,className:styles.input,placeholder:\"Confirm password\"})}),formErrors.confirm_password,/*#__PURE__*/_jsx(\"div\",{className:styles.button_wrapper,children:/*#__PURE__*/_jsx(\"button\",{className:styles.button,type:\"submit\",children:\"Sign up\"})}),/*#__PURE__*/_jsxs(\"p\",{className:styles.textUnderbutton,children:[\"Already have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/login\",className:styles.underlined,children:\"Sign in\"})]})]})]});}","map":{"version":3,"sources":["/home/bogdan/project-manager-app/src/components/registrationForm/RegistrationForm.jsx"],"names":["React","useEffect","useState","useDispatch","register","styles","Background","Link","initialState","email","password","confirm_password","RegistrationForm","user","setUser","formErrors","setFormErrors","dispatch","isSubmitting","setIsSubmitting","handleChange","target","name","value","prevState","handleSubmit","event","preventDefault","validate","errors","regex","warning","test","length","Object","keys","submitForm","wrapper","form","title","label","color","borderBottom","input","button_wrapper","button","textUnderbutton","underlined"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { register } from '../../redux/auth/auth-operations.js';\nimport styles from './RegistrationForm.module.css';\nimport Background from '../background/Background.jsx';\nimport { Link } from 'react-router-dom';\n\nconst initialState = {\n  email: '',\n  password: '',\n  confirm_password: '',\n};\n\nexport default function RegistrationForm() {\n  const [user, setUser] = useState(initialState);\n  const [formErrors, setFormErrors] = useState({});\n  const dispatch = useDispatch();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleChange = ({ target: { name, value } }) => {\n    setUser(prevState => ({ ...prevState, [name]: value }));\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setFormErrors(validate(user));\n    setIsSubmitting(true);\n  };\n\n  const validate = user => {\n    let errors = {};\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;\n    if (!user.email) {\n      errors.email = (\n        <span className={styles.warning}> Email is a required field</span>\n      );\n    } else if (!regex.test(user.email)) {\n      errors.email = (\n        <span className={styles.warning}>Invalid email format</span>\n      );\n    }\n    if (!user.password) {\n      errors.password = (\n        <span className={styles.warning}> Password is a required field</span>\n      );\n    } else if (user.password.length < 6) {\n      errors.password = (\n        <span className={styles.warning}>\n          Password must be more than 6 characters\n        </span>\n      );\n    } else if (user.password !== user.confirm_password) {\n      errors.confirm_password = (\n        <span className={styles.warning}>Passwords don't match</span>\n      );\n    }\n    return errors;\n  };\n\n  useEffect(() => {\n    if (Object.keys(formErrors).length === 0 && isSubmitting) {\n      const submitForm = () => {\n        dispatch(\n          register({\n            email: user.email,\n            password: user.password,\n          }),\n        );\n      };\n      submitForm();\n    }\n  }, [formErrors, isSubmitting, user.email, user.password, dispatch]);\n\n  return (\n    <div className={styles.wrapper}>\n      <Background />\n\n      <form onSubmit={handleSubmit} className={styles.form}>\n        <h1 className={styles.title}>Sign up</h1>\n        <label className={styles.label}>\n          <input\n            style={{\n              color: formErrors.email\n                ? 'rgba(204, 32, 41, 0.6)'\n                : 'rgba(24, 28, 39, 0.6)',\n              borderBottom: formErrors.email\n                ? '1px solid rgba(204, 32, 41, 0.6)'\n                : '1px solid rgba(24, 28, 39, 0.2)',\n            }}\n            type=\"email\"\n            name=\"email\"\n            value={user.email}\n            onChange={handleChange}\n            className={styles.input}\n            placeholder=\"E-mail\"\n          />\n        </label>\n        {formErrors.email}\n\n        <label className={styles.label}>\n          <input\n            style={{\n              color: formErrors.password\n                ? 'rgba(204, 32, 41, 0.6)'\n                : 'rgba(24, 28, 39, 0.6)',\n              borderBottom: formErrors.password\n                ? '1px solid rgba(204, 32, 41, 0.6)'\n                : '1px solid rgba(24, 28, 39, 0.2)',\n            }}\n            type=\"password\"\n            name=\"password\"\n            value={user.password}\n            onChange={handleChange}\n            className={styles.input}\n            placeholder=\"Password\"\n          />\n        </label>\n        {formErrors.password}\n\n        <label className={styles.label}>\n          <input\n            style={{\n              color: formErrors.confirm_password\n                ? 'rgba(204, 32, 41, 0.6)'\n                : 'rgba(24, 28, 39, 0.6)',\n              borderBottom: formErrors.confirm_password\n                ? '1px solid rgba(204, 32, 41, 0.6)'\n                : '1px solid rgba(24, 28, 39, 0.2)',\n            }}\n            type=\"password\"\n            name=\"confirm_password\"\n            value={user.confirm_password}\n            onChange={handleChange}\n            className={styles.input}\n            placeholder=\"Confirm password\"\n          />\n        </label>\n        {formErrors.confirm_password}\n\n        <div className={styles.button_wrapper}>\n          <button className={styles.button} type=\"submit\">\n            Sign up\n          </button>\n        </div>\n        <p className={styles.textUnderbutton}>\n          Already have an account?\n          <Link to=\"/login\" className={styles.underlined}>\n            Sign in\n          </Link>\n        </p>\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}