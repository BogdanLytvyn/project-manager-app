{"ast":null,"code":"import _regeneratorRuntime from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useHistory}from'react-router-dom';import{token}from'../redux/auth/auth-operations';import{getIsAuthenticated}from'../redux/auth/auth-selectors';import{getProjects}from'../redux/projects/projects-operations';import Header from'./header/Header';import Main from'./main/Main';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var isAuthenticated=useSelector(getIsAuthenticated);var history=useHistory();var dispatch=useDispatch();useEffect(function(){var getResult=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!isAuthenticated){_context.next=5;break;}token.refresh(isAuthenticated);_context.next=4;return dispatch(getProjects());case 4:return _context.abrupt(\"return\");case 5:if(!isAuthenticated){history.push('/registration');}case 6:case\"end\":return _context.stop();}}},_callee);}));return function getResult(){return _ref.apply(this,arguments);};}();getResult();},[history,isAuthenticated,dispatch]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{})]});};export default App;","map":{"version":3,"sources":["/home/bogdan/project-manager-app/src/components/App.jsx"],"names":["useEffect","useDispatch","useSelector","useHistory","token","getIsAuthenticated","getProjects","Header","Main","App","isAuthenticated","history","dispatch","getResult","refresh","push"],"mappings":"mOAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,KAAT,KAAsB,+BAAtB,CACA,OAASC,kBAAT,KAAmC,8BAAnC,CACA,OAASC,WAAT,KAA4B,uCAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,C,wFAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,GAAMC,CAAAA,eAAe,CAAGR,WAAW,CAACG,kBAAD,CAAnC,CACA,GAAMM,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CACA,GAAMS,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAEAD,SAAS,CAAC,UAAM,CACd,GAAMa,CAAAA,SAAS,0FAAG,uIACZH,eADY,yBAEdN,KAAK,CAACU,OAAN,CAAcJ,eAAd,EAFc,sBAGRE,CAAAA,QAAQ,CAACN,WAAW,EAAZ,CAHA,gDAOhB,GAAI,CAACI,eAAL,CAAsB,CACpBC,OAAO,CAACI,IAAR,CAAa,eAAb,EACD,CATe,sDAAH,kBAATF,CAAAA,SAAS,0CAAf,CAWAA,SAAS,GACV,CAbQ,CAaN,CAACF,OAAD,CAAUD,eAAV,CAA2BE,QAA3B,CAbM,CAAT,CAeA,mBACE,oCACE,KAAC,MAAD,IADF,cAEE,KAAC,IAAD,IAFF,GADF,CAMD,CA1BD,CA4BA,cAAeH,CAAAA,GAAf","sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { token } from '../redux/auth/auth-operations';\nimport { getIsAuthenticated } from '../redux/auth/auth-selectors';\nimport { getProjects } from '../redux/projects/projects-operations';\nimport Header from './header/Header';\n\nimport Main from './main/Main';\n\nconst App = () => {\n  const isAuthenticated = useSelector(getIsAuthenticated);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const getResult = async () => {\n      if (isAuthenticated) {\n        token.refresh(isAuthenticated);\n        await dispatch(getProjects());\n        return;\n      }\n\n      if (!isAuthenticated) {\n        history.push('/registration');\n      }\n    };\n    getResult();\n  }, [history, isAuthenticated, dispatch]);\n\n  return (\n    <div>\n      <Header />\n      <Main />\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}