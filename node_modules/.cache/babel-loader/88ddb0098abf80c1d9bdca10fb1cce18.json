{"ast":null,"code":"import _objectSpread from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bogdan/project-manager-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{refreshTemplate}from'../projects/projects-operations.js';import{fetchTaskRequest,fetchTaskSuccess,fetchTaskError,createTaskRequest,createTaskSuccess,createTaskError,deleteTaskRequest,deleteTaskSuccess,deleteTaskError,changeTaskRequest,changeTaskSuccess,changeTaskError}from'./task-actions.js';axios.defaults.baseURL='https://sbc-backend.goit.global';var fetchTasks=function fetchTasks(sprintId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(fetchTaskRequest());_context.prev=1;_context.next=4;return axios.get(\"/task/\".concat(sprintId));case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch(fetchTaskSuccess(data.constructor.name==='Array'?data:[]));_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);dispatch(fetchTaskError(_context.t0===null||_context.t0===void 0?void 0:_context.t0.message));refreshTemplate(function(){return fetchTasks(sprintId);},_context.t0,dispatch);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};var createTask=function createTask(task,sprintId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(createTaskRequest());_context2.prev=1;_context2.next=4;return axios.post(\"/task/\".concat(sprintId),task);case 4:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;dispatch(createTaskSuccess(_objectSpread(_objectSpread({},data),{},{_id:data.id})));_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);dispatch(createTaskError(_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.message));refreshTemplate(function(){return createTask(task,sprintId);},_context2.t0,dispatch);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};var deleteTask=function deleteTask(taskId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(deleteTaskRequest());_context3.prev=1;_context3.next=4;return axios.delete(\"/task/\".concat(taskId));case 4:dispatch(deleteTaskSuccess(taskId));_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](1);dispatch(deleteTaskError(_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.message));refreshTemplate(function(){return deleteTask(taskId);},_context3.t0,dispatch);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};var changeTask=function changeTask(hoursWasted,taskId,currentDay){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var _yield$axios$patch,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(changeTaskRequest());_context4.prev=1;_context4.next=4;return axios.patch(\"/task/\".concat(taskId),{date:currentDay,hours:hoursWasted});case 4:_yield$axios$patch=_context4.sent;data=_yield$axios$patch.data;dispatch(changeTaskSuccess({currentDay:data.day.currentDay,singleHoursWasted:data.day.singleHoursWasted,hoursWasted:data.newWastedHours,taskId:taskId}));_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);dispatch(changeTaskError(_context4.t0===null||_context4.t0===void 0?void 0:_context4.t0.message));refreshTemplate(function(){return changeTask(hoursWasted,taskId,currentDay);},_context4.t0,dispatch);case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[1,9]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export{fetchTasks,createTask,deleteTask,changeTask};","map":{"version":3,"sources":["/home/bogdan/project-manager-app/src/redux/tasks/task-operations.js"],"names":["axios","refreshTemplate","fetchTaskRequest","fetchTaskSuccess","fetchTaskError","createTaskRequest","createTaskSuccess","createTaskError","deleteTaskRequest","deleteTaskSuccess","deleteTaskError","changeTaskRequest","changeTaskSuccess","changeTaskError","defaults","baseURL","fetchTasks","sprintId","dispatch","get","data","constructor","name","message","createTask","task","post","_id","id","deleteTask","taskId","delete","changeTask","hoursWasted","currentDay","patch","date","hours","day","singleHoursWasted","newWastedHours"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { refreshTemplate } from '../projects/projects-operations.js';\nimport {\n  fetchTaskRequest,\n  fetchTaskSuccess,\n  fetchTaskError,\n  createTaskRequest,\n  createTaskSuccess,\n  createTaskError,\n  deleteTaskRequest,\n  deleteTaskSuccess,\n  deleteTaskError,\n  changeTaskRequest,\n  changeTaskSuccess,\n  changeTaskError,\n} from './task-actions.js';\n\naxios.defaults.baseURL = 'https://sbc-backend.goit.global';\n\nconst fetchTasks = sprintId => async dispatch => {\n  dispatch(fetchTaskRequest());\n  try {\n    const { data } = await axios.get(`/task/${sprintId}`);\n    dispatch(fetchTaskSuccess(data.constructor.name === 'Array' ? data : []));\n  } catch (error) {\n    dispatch(fetchTaskError(error?.message));\n    refreshTemplate(() => fetchTasks(sprintId), error, dispatch);\n  }\n};\n\nconst createTask = (task, sprintId) => async dispatch => {\n  dispatch(createTaskRequest());\n  try {\n    const { data } = await axios.post(`/task/${sprintId}`, task);\n    dispatch(createTaskSuccess({ ...data, _id: data.id }));\n  } catch (error) {\n    dispatch(createTaskError(error?.message));\n    refreshTemplate(() => createTask(task, sprintId), error, dispatch);\n  }\n};\n\nconst deleteTask = taskId => async dispatch => {\n  dispatch(deleteTaskRequest());\n  try {\n    await axios.delete(`/task/${taskId}`);\n    dispatch(deleteTaskSuccess(taskId));\n  } catch (error) {\n    dispatch(deleteTaskError(error?.message));\n    refreshTemplate(() => deleteTask(taskId), error, dispatch);\n  }\n};\n\nconst changeTask = (hoursWasted, taskId, currentDay) => async dispatch => {\n  dispatch(changeTaskRequest());\n  try {\n    const { data } = await axios.patch(`/task/${taskId}`, {\n      date: currentDay,\n      hours: hoursWasted,\n    });\n    dispatch(\n      changeTaskSuccess({\n        currentDay: data.day.currentDay,\n        singleHoursWasted: data.day.singleHoursWasted,\n        hoursWasted: data.newWastedHours,\n        taskId,\n      }),\n    );\n  } catch (error) {\n    dispatch(changeTaskError(error?.message));\n    refreshTemplate(\n      () => changeTask(hoursWasted, taskId, currentDay),\n      error,\n      dispatch,\n    );\n  }\n};\n\nexport { fetchTasks, createTask, deleteTask, changeTask };\n"]},"metadata":{},"sourceType":"module"}